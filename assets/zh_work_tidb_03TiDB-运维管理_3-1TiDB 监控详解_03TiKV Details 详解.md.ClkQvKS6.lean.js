import{_ as r,c as t,a4 as a,o as i}from"./chunks/framework.C3yiUNUH.js";const k=JSON.parse('{"title":"TIKV 监控面板 - Approximate region size","description":"","frontmatter":{},"headers":[],"relativePath":"zh/work/tidb/03TiDB-运维管理/3-1TiDB 监控详解/03TiKV Details 详解.md","filePath":"zh/work/tidb/03TiDB-运维管理/3-1TiDB 监控详解/03TiKV Details 详解.md"}'),o={name:"zh/work/tidb/03TiDB-运维管理/3-1TiDB 监控详解/03TiKV Details 详解.md"};function s(c,e,n,p,l,h){return i(),t("div",null,e[0]||(e[0]=[a('<h1 id="tikv-监控面板-approximate-region-size" tabindex="-1">TIKV 监控面板 - Approximate region size <a class="header-anchor" href="#tikv-监控面板-approximate-region-size" aria-label="Permalink to &quot;TIKV 监控面板 - Approximate region size&quot;">​</a></h1><h1 id="server" tabindex="-1">Server <a class="header-anchor" href="#server" aria-label="Permalink to &quot;Server&quot;">​</a></h1><h2 id="approximate-region-size" tabindex="-1">Approximate region size <a class="header-anchor" href="#approximate-region-size" aria-label="Permalink to &quot;Approximate region size&quot;">​</a></h2><p>tikv_raftstore_region_size_bucket</p><p>region_size = (Mem Size + CF Storage Size)[&quot;default&quot;, &quot;lock&quot;, &quot;write&quot;]</p><p>there&#39;re 2 ways, TiKV gets RegionSize(accurate scan/approximate estimate), but, only one scenario has used &quot;accurate scan&quot; which&#39;s <a href="https://github.com/tikv/tikv/blob/0e3806935c11be6bf9a75d8666a183520d3c4556/components/raftstore/src/store/fsm/peer.rs#L6185" target="_blank" rel="noreferrer">after split command executing and checking</a>, or, there&#39;s <a href="https://github.com/tikv/tikv/blob/0e3806935c11be6bf9a75d8666a183520d3c4556/components/raftstore/src/store/worker/pd.rs#L1998" target="_blank" rel="noreferrer">no splitKey from pd</a>:</p><ol><li><a href="https://github.com/tikv/tikv/blob/0e3806935c11be6bf9a75d8666a183520d3c4556/components/raftstore/src/store/worker/split_check.rs#L631" target="_blank" rel="noreferrer">CheckPolicy::Scan</a> --&gt; <a href="https://github.com/tikv/tikv/blob/0e3806935c11be6bf9a75d8666a183520d3c4556/components/raftstore/src/store/worker/split_check.rs#L852" target="_blank" rel="noreferrer">router.update_approximate_size</a> --&gt; <a href="https://github.com/tikv/tikv/blob/0e3806935c11be6bf9a75d8666a183520d3c4556/components/raftstore/src/store/fsm/peer.rs#L6276" target="_blank" rel="noreferrer">SplitCheckTrigger</a></li><li><a href="https://github.com/tikv/tikv/blob/0e3806935c11be6bf9a75d8666a183520d3c4556/components/raftstore/src/store/worker/split_check.rs#L653" target="_blank" rel="noreferrer">CheckPolicy::Approximate</a> _ _ _ _ _ _ _ _ $\\uparrow$</li></ol><p>Tracking List:</p><ol><li><a href="https://github.com/tikv/tikv/issues/6161" target="_blank" rel="noreferrer">Thoughts of improving region approximate size accuracy and efficiency</a></li><li><a href="https://github.com/tikv/tikv/issues/12025" target="_blank" rel="noreferrer">https://github.com/tikv/tikv/issues/12025</a></li><li></li></ol>',9)]))}const f=r(o,[["render",s]]);export{k as __pageData,f as default};

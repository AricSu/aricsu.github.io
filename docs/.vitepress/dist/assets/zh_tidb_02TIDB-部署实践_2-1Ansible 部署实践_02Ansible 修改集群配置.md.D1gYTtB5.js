import{_ as i,c as a,a5 as n,o as l}from"./chunks/framework.PytyN_aB.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"zh/tidb/02TIDB-部署实践/2-1Ansible 部署实践/02Ansible 修改集群配置.md","filePath":"zh/tidb/02TIDB-部署实践/2-1Ansible 部署实践/02Ansible 修改集群配置.md"}'),p={name:"zh/tidb/02TIDB-部署实践/2-1Ansible 部署实践/02Ansible 修改集群配置.md"};function t(e,s,h,k,d,F){return l(),a("div",null,s[0]||(s[0]=[n(`<h2 id="核心步骤" tabindex="-1">核心步骤 <a class="header-anchor" href="#核心步骤" aria-label="Permalink to &quot;核心步骤&quot;">​</a></h2><p>1.中控机（tidb01-41）修改集群配置<br> 2.中控机执行rolling-update滚动更新<br> 3.TiKV任意子节点部署目录检查配置</p><h2 id="中控机-tidb01-41-修改集群配置" tabindex="-1">中控机（tidb01-41）修改集群配置 <a class="header-anchor" href="#中控机-tidb01-41-修改集群配置" aria-label="Permalink to &quot;中控机（tidb01-41）修改集群配置&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[tidb@tidb01-41 tidb-ansible]$ pwd</span></span>
<span class="line"><span>/home/tidb/soft/tidb-ansible</span></span>
<span class="line"><span>[tidb@tidb01-41 tidb-ansible]$ vi conf/tidb.yml </span></span>
<span class="line"><span></span></span>
<span class="line"><span>......</span></span>
<span class="line"><span>......</span></span>
<span class="line"><span>log:</span></span>
<span class="line"><span>  # Log level: debug, info, warn, error, fatal.</span></span>
<span class="line"><span>  # level: &quot;info&quot;</span></span>
<span class="line"><span>  level: &quot;debug&quot;</span></span>
<span class="line"><span>......</span></span>
<span class="line"><span>......</span></span></code></pre></div><h2 id="中控机执行rolling-update滚动更新" tabindex="-1">中控机执行rolling-update滚动更新 <a class="header-anchor" href="#中控机执行rolling-update滚动更新" aria-label="Permalink to &quot;中控机执行rolling-update滚动更新&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[tidb@tidb01-41 soft]$ cd tidb-ansible/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[tidb@tidb01-41 tidb-ansible]$ ansible-playbook rolling_update.yml --tags</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">tidb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PLAY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [check </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> locally]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *********************************************************************************************************************************</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">......</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">......</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">......</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PLAY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RECAP</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> **************************************************************************************************************************************************</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.1.41</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ok=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">34</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   changed=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    unreachable=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    failed=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.1.42</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ok=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    changed=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    unreachable=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    failed=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">192.168.1.43</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ok=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">33</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   changed=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    unreachable=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    failed=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ok=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    changed=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    unreachable=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    failed=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Congrats!</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> All</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> goes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> well.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="tikv任意子节点部署目录检查配置" tabindex="-1">TiKV任意子节点部署目录检查配置 <a class="header-anchor" href="#tikv任意子节点部署目录检查配置" aria-label="Permalink to &quot;TiKV任意子节点部署目录检查配置&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[root@tidb03-43 deploy]# ip addr |grep ens33</span></span>
<span class="line"><span>2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span></span>
<span class="line"><span>    inet 192.168.1.43/24 brd 192.168.1.255 scope global noprefixroute ens33</span></span>
<span class="line"><span>[root@tidb03-43 deploy]# pwd</span></span>
<span class="line"><span>/data/tidb/deploy</span></span>
<span class="line"><span>[root@tidb03-43 deploy]# cat conf/tidb.toml |grep debug</span></span>
<span class="line"><span>level = &quot;debug&quot;</span></span></code></pre></div>`,8)]))}const o=i(p,[["render",t]]);export{g as __pageData,o as default};

import{_ as s,c as a,o as i,a4 as d}from"./chunks/framework.svyMRVY3.js";const k=JSON.parse('{"title":"DocDB 数据收集","description":"","frontmatter":{},"headers":[],"relativePath":"zh/tihc/collect/docdb.md","filePath":"zh/tihc/collect/docdb.md"}'),e={name:"zh/tihc/collect/docdb.md"};function n(l,t,h,o,p,r){return i(),a("div",null,t[0]||(t[0]=[d(`<h1 id="docdb-数据收集" tabindex="-1">DocDB 数据收集 <a class="header-anchor" href="#docdb-数据收集" aria-label="Permalink to &quot;DocDB 数据收集&quot;">​</a></h1><p>使用 <code>tihc collect docdb</code> 命令收集存储在 TiDB 集群 Docdb 中 TOPSQL 的 DocDB 相关数据。</p><h2 id="快速开始" tabindex="-1">快速开始 <a class="header-anchor" href="#快速开始" aria-label="Permalink to &quot;快速开始&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 收集最近5分钟的 TopSQL 数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tihc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> collect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docdb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --instance</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:10080</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --storage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> topsql.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定时间范围收集数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tihc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> collect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docdb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --instance</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:10080</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1744195176</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --end</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1744195476</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --storage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> custom_topsql.json</span></span></code></pre></div><h2 id="主要选项" tabindex="-1">主要选项 <a class="header-anchor" href="#主要选项" aria-label="Permalink to &quot;主要选项&quot;">​</a></h2><table tabindex="0"><thead><tr><th>选项</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td><code>--instance &lt;INSTANCE&gt;</code></td><td>实例地址，格式为 ip:port</td><td>127.0.0.1:10080</td></tr><tr><td><code>--ngurl &lt;NGURL&gt;</code></td><td>NG Monitor 地址</td><td>127.0.0.1:12020</td></tr><tr><td><code>--start &lt;START&gt;</code></td><td>开始时间戳</td><td>1744195176</td></tr><tr><td><code>--end &lt;END&gt;</code></td><td>结束时间戳</td><td>1744195476</td></tr><tr><td><code>--window &lt;WINDOW&gt;</code></td><td>时间窗口大小</td><td>2s</td></tr><tr><td><code>--top &lt;TOP&gt;</code></td><td>返回结果数量限制</td><td>10000</td></tr><tr><td><code>--storage &lt;STORAGE&gt;</code></td><td>数据存储文件路径</td><td>topsql.json</td></tr><tr><td><code>-l, --log-file &lt;LOG_FILE&gt;</code></td><td>日志文件路径</td><td>tihc_started_at_20250409_184436.log</td></tr><tr><td><code>-L, --log-level &lt;LOG_LEVEL&gt;</code></td><td>日志级别（trace、debug、info、warn、error）</td><td>info</td></tr></tbody></table>`,6)]))}const F=s(e,[["render",n]]);export{k as __pageData,F as default};
